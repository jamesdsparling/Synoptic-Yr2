<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      body {
        padding: 0;
        margin: 0;
      }
      html,
      body,
      #map {
        height: 100%;
        width: 100%;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
      integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
      crossorigin=""
    />

    <script
      src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
      integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
      crossorigin=""
    ></script>

    <title>Cape York</title>
  </head>
  <body>
    <a href="/about">About</a>
    <div id="map"></div>

    <script>
      var map = L.map("map").setView([-10.689457, 142.531821], 17);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: "Â© OpenStreetMap",
      }).addTo(map);

      var fireIcon = L.icon({
        iconUrl: "fireIcon.png",
        iconSize: [48, 65.48], // size of the icon
      });

      var waterIcon = L.icon({
        iconUrl: "waterIcon.png",
        iconSize: [48, 48], // size of the icon
      });

      var coralIcon = L.icon({
        iconUrl: "coralIcon.png",
        iconSize: [48, 48], // size of the icon
      });

      var circle = L.circle([-10.688521, 142.53125], {
        color: "yellow",
        fillColor: "yellow",
        fillOpacity: 0.5,
        radius: 50,
      });
      circle.addTo(map);

      class polygonWithIcon {
        constructor(polygon, icon, color) {
          this.polygon = L.polygon(polygon, {
            color: color,
            fillColor: color,
            fillOpacity: 0.5,
          });
          this.marker = L.marker(this.polygon.getBounds().getCenter(), {
            icon: icon,
          });
          this.group = L.featureGroup([this.polygon, this.marker]);
        }

        addTo(map) {
          this.group.addTo(map);
        }

        bindPopup(content) {
          this.group.bindPopup(content);
        }
      }

      class firePoly extends polygonWithIcon {
        constructor(polygon) {
          super(polygon, fireIcon, "red");
        }
      }

      class waterPoly extends polygonWithIcon {
        constructor(polygon) {
          super(polygon, waterIcon, "blue");
        }
      }

      class coralPoly extends polygonWithIcon {
        constructor(polygon) {
          super(polygon, coralIcon, "green");
        }
      }

      let fire1Pos = [
        [-10.689277, 142.531764],
        [-10.689966, 142.53268],
        [-10.691178, 142.532419],
        [-10.690155, 142.531786],
      ];
      let fire1 = new firePoly(fire1Pos);
      fire1.bindPopup("<b>Fire!</b><br>Stay away.");
      fire1.addTo(map);

      let water1Pos = [
        [-10.69013, 142.53339],
        [-10.69056, 142.53384],
        [-10.69057, 142.53323],
      ];
      let water1 = new waterPoly(water1Pos);
      water1.bindPopup("Water source");
      water1.addTo(map);

      let coral1Pos = [
        [-10.68893, 142.53081],
        [-10.68956, 142.531],
        [-10.69012, 142.53135],
        [-10.69083, 142.5316],
        [-10.69131, 142.53168],
        [-10.69106, 142.53068],
        [-10.69033, 142.53052],
      ];
      let coral1 = new coralPoly(coral1Pos);
      coral1.bindPopup("Coral");
      coral1.addTo(map);

      let marker1 = L.marker([-10.68778, 142.53159]);
      marker1.bindPopup("Custom marker");
      marker1.addTo(map);
    </script>
  </body>
</html>
